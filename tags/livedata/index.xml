<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>LiveData on Blog</title><link>https://foezzy.github.io/tags/livedata/</link><description>Recent content in LiveData on Blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sun, 12 Nov 2023 19:45:20 +0000</lastBuildDate><atom:link href="https://foezzy.github.io/tags/livedata/index.xml" rel="self" type="application/rss+xml"/><item><title>LiveDataæ•°æ®ä¸¢å¤±é—®é¢˜</title><link>https://foezzy.github.io/posts/livedata%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%E9%97%AE%E9%A2%98/</link><pubDate>Sun, 12 Nov 2023 19:45:20 +0000</pubDate><guid>https://foezzy.github.io/posts/livedata%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%E9%97%AE%E9%A2%98/</guid><description>LiveDataä¸€ä¸ªå…·æœ‰ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥èƒ½åŠ›çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼Œæ˜¯åœ¨é¡µé¢ä¸æ•°æ®åˆ†ç¦»ä¸­ç»´æŒé¡µé¢å’Œæ•°æ®çš„ä¸€è‡´æ€§çš„æ¡¥æ¢ã€‚
åŸºæœ¬ä½¿ç”¨ ğŸ”—ä¸€èˆ¬åœ¨ViewModelä¸­å®šä¹‰
val uiStatusLiveData = MutableLiveData&amp;lt;LoginUiStatus&amp;gt;() åœ¨éœ€è¦é€šçŸ¥é¡µé¢çš„æ•°æ®å˜åŒ–çš„æ—¶å€™ï¼Œå°†æ¶ˆæ¯å‘å¸ƒ
val status = LoginUiStatus() status.needDismissDialog = true uiStatusLiveData.postValue(status) åœ¨activityæˆ–è€…fragmentä¸­åªè¦æ³¨å†Œè§‚å¯Ÿç€å°±å¥½äº†
viewModel.uiStatusLiveData.observe(this) { status -&amp;gt; //æ›´æ”¹UIçš„ä»£ç  } ä»¥ä¸Šå°±æ˜¯ç®€å•çš„ä½¿ç”¨ï¼Œç„¶è€Œåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‡ºç°äº†ä¸€ä¸ªé—®é¢˜ï¼šå‘é€æ•°æ®ä¸¢å¤±ã€‚
æ•°æ®ä¸¢å¤±é—®é¢˜ ğŸ”—äº‹æƒ…çš„èµ·å› æ˜¯è¿™æ ·çš„ï¼Œæˆ‘åœ¨viewmodelä¸­å‘¨æœŸæ€§çš„å‘ä¸€ä¸ªæ¶ˆæ¯å»é€šçŸ¥UIæ”¹å˜ï¼Œåœ¨å‘¨æœŸä¹‹å¤–ï¼Œè¿˜å‘äº†å…¶ä»–çš„æ¶ˆæ¯ã€‚å¯æ˜¯æœ‰æ—¶å€™å´æ”¶ä¸åˆ°å‘¨æœŸä¹‹å¤–çš„æ¶ˆæ¯ã€‚äºæ˜¯å»æŸ¥æºç çœ‹çœ‹é—®é¢˜å‡ºåœ¨äº†å“ªã€‚
protected void postValue(T value) { boolean postTask; synchronized (mDataLock) { postTask = mPendingData == NOT_SET; mPendingData = value; } if (!postTask) { return; } ArchTaskExecutor.getInstance().postToMainThread(mPostValueRunnable); } è¿™ä»£ç å°±æœ‰æ„æ€äº†ï¼Œå¦‚æœä¸€æ¬¡å‘é€å¾ˆå¤šï¼ŒLiveDataæ¥ä¸åŠå‘é€çš„è¯ï¼Œä»–å°±ä¼šä¸¢å¼ƒæœ€æ—©è·å–çš„è€Œåªå‘é€æœ€åä¸€ä¸ªæ¶ˆæ¯ã€‚å¦‚æœä¸€æ¬¡å‘é€æ¶ˆæ¯å¤ªå¤šçš„æ—¶å€™ï¼Œé‡è¦çš„ä¸­é—´æ€æ¶ˆæ¯ä¼šè¢«ä¸¢å¼ƒã€‚
é‚£ä¹ˆå‘é€æ¶ˆæ¯è¿˜æœ‰å¦ä¸€ä¸ªæ–¹æ³•å³setValue()
@MainThread protected void setValue(T value) { assertMainThread(&amp;#34;setValue&amp;#34;); mVersion++; mData = value; dispatchingValue(null); } è¿™ä¸ªæ–¹æ³•ä¸ä¼šä¸¢å¤±æ¶ˆæ¯ï¼Œä½†æ˜¯åªèƒ½åœ¨ä¸»çº¿ç¨‹ä¸­ä½¿ç”¨
æ€»ç»“ ğŸ”—setValueæ–¹æ³•ï¼Œä¸ä¼šä¸¢å¤±æ¶ˆæ¯ï¼Œä½†æ˜¯å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­ä½¿ç”¨</description></item></channel></rss>